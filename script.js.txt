let currentQuestion = {};
let score = 0;
let usedQuestions = [];

function getRandomQuestion() {
  if (usedQuestions.length === questions.length) {
    alert("You've completed all available questions!");
    return;
  }

  let index;
  do {
    index = Math.floor(Math.random() * questions.length);
  } while (usedQuestions.includes(index));

  usedQuestions.push(index);
  return questions[index];
}

function displayQuestion() {
  document.getElementById("feedback").textContent = "";
  currentQuestion = getRandomQuestion();
  if (!currentQuestion) return;

  document.getElementById("question").textContent = currentQuestion.question;
  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  currentQuestion.options.forEach((option, index) => {
    const label = document.createElement("label");
    label.innerHTML = `<input type="radio" name="option" value="${option}"/> ${option}`;
    optionsDiv.appendChild(label);
  });

  document.getElementById("submit").style.display = "inline";
  document.getElementById("next").style.display = "none";
}

document.getElementById("submit").addEventListener("click", () => {
  const selected = document.querySelector('input[name="option"]:checked');
  if (!selected) {
    alert("Please select an answer.");
    return;
  }

  if (selected.value === currentQuestion.answer) {
    document.getElementById("feedback").textContent = "Correct!";
    score++;
  } else {
    document.getElementById("feedback").textContent = `Incorrect. Correct answer: ${currentQuestion.answer}`;
  }

  document.getElementById("score").textContent = `Score: ${score}`;
  document.getElementById("submit").style.display = "none";
  document.getElementById("next").style.display = "inline";
});

document.getElementById("next").addEventListener("click", displayQuestion);

// Start the quiz
window.onload = displayQuestion;
